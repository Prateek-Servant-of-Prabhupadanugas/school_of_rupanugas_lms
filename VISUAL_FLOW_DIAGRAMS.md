# ğŸ“Š Visual Flow Diagram - Video Player System

## Complete User Journey ğŸ¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      HOME PAGE                              â”‚
â”‚  [Course 1] [Course 2] [Course 3] ...                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Click Course
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              COURSE DETAIL PAGE                             â”‚
â”‚  â”œâ”€ Course Title                                            â”‚
â”‚  â”œâ”€ Course Description                                      â”‚
â”‚  â”œâ”€ Price: â‚¹2000                                            â”‚
â”‚  â”œâ”€ Enrolled: âœ“ Yes (Verified)                              â”‚
â”‚  â””â”€ [ğŸ¥ Watch Course Button]  â† Click here                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Click "Watch Course"
               â†“ Navigate to /watch/:courseId
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LESSON LIST PAGE (NEW!)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Back to Course                                      â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ Course Title                                        â”‚   â”‚
â”‚  â”‚ 3 Lessons â€¢ Tap a lesson to begin watching         â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  [1] Sacred Philosophy                             â”‚   â”‚
â”‚  â”‚      Learn the basics...                           â”‚   â”‚
â”‚  â”‚      ğŸ¬ 2 Videos                    [Play â†’]       â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  [2] Practical Application                         â”‚   â”‚
â”‚  â”‚      How to apply in life...                       â”‚   â”‚
â”‚  â”‚      ğŸ¬ 3 Videos                    [Play â†’]       â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  [3] Advanced Topics                               â”‚   â”‚
â”‚  â”‚      Deep understanding...                         â”‚   â”‚
â”‚  â”‚      ğŸ¬ 1 Video                     [Play â†’]       â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Click [Play â†’] on Lesson 2
               â†“ Navigate to /video/:courseId/:lessonId/0
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           VIDEO PLAYER PAGE (NEW & IMPROVED!)              â”‚
â”‚                                                             â”‚
â”‚  Home / Courses / Sacred Philosophy / Practical...         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚    â”‚
â”‚  â”‚          â”‚                         â”‚             â”‚    â”‚
â”‚  â”‚          â”‚   [ğŸ¥ VIDEO PLAYER]     â”‚  100%       â”‚    â”‚
â”‚  â”‚          â”‚   Full Screen Video     â”‚  width      â”‚    â”‚
â”‚  â”‚          â”‚                         â”‚             â”‚    â”‚
â”‚  â”‚          â”‚  Shows Video            â”‚             â”‚    â”‚
â”‚  â”‚          â”‚  Part 1 of 3            â”‚             â”‚    â”‚
â”‚  â”‚          â”‚                         â”‚             â”‚    â”‚
â”‚  â”‚          â”‚  (Playing YouTube ID)   â”‚             â”‚    â”‚
â”‚  â”‚          â”‚                         â”‚             â”‚    â”‚
â”‚  â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [â† Previous Part] Part 1 of 3  â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  [Next Part â†’] â”‚
â”‚  â”‚                   â–²                                  â”‚   â”‚
â”‚  â”‚              Progress Bar                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ About This Lesson                                   â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ Practical Application - How to apply in life...    â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ Lorem ipsum dolor sit amet, consectetur adipiscing  â”‚   â”‚
â”‚  â”‚ elit. Sed do eiusmod tempor incididunt ut labore.   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚                  [â† Back to All Lessons]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Click [Next Part â†’]
               â†“ Navigate to /video/:courseId/:lessonId/1
               â”‚ (Same page, different video)
               â”‚
               â”œâ”€ Video loads (Part 2)
               â”œâ”€ Shows "Part 2 of 3"
               â”œâ”€ Progress bar updates
               â”œâ”€ Can click Next again or Previous
               â”‚
               â””â”€ Continue navigation as needed...
                  â†“ Click [â† Back to All Lessons]
                  â†“ Navigate to /watch/:courseId
                  â””â”€ Back to Lesson List
```

---

## Data Flow Architecture ğŸ—ï¸

```
DATABASE (Appwrite)
â”‚
â”œâ”€ Courses Collection
â”‚  â””â”€ course_123
â”‚     â”œâ”€ title: "Sacred Philosophy"
â”‚     â”œâ”€ description: "..."
â”‚     â””â”€ price: 2000
â”‚
â”œâ”€ Lessons Collection
â”‚  â””â”€ lesson_456
â”‚     â”œâ”€ courseId: "course_123"
â”‚     â”œâ”€ title: "Practical Application"
â”‚     â”œâ”€ description: "How to apply..."
â”‚     â”œâ”€ order: 2
â”‚     â””â”€ youtubeIds: ["dQw4w9WgXcQ", "jNQXAC9IVRw", "pour9LM8LF7U"]
â”‚
â””â”€ Enrollments Collection
   â””â”€ enrollment_789
      â”œâ”€ userId: "user_101"
      â”œâ”€ courseId: "course_123"
      â””â”€ status: "Verified"

        â†“ (Appwrite Query)

REACT COMPONENTS
â”‚
â”œâ”€ CourseDetail.jsx
â”‚  â””â”€ Displays: title, description, price
â”‚     Button: "Watch Course" â†’ /watch/:courseId
â”‚
â”œâ”€ LessonDetail.jsx (LIST VIEW)
â”‚  â””â”€ Displays: Lesson list from database
â”‚     Queries: GET all lessons where courseId = "course_123"
â”‚     Button: [Play â†’] â†’ /video/:courseId/:lessonId/0
â”‚
â””â”€ VideoPlayer.jsx (PLAYER VIEW)
   â””â”€ Displays: Single video with controls
      Queries: GET lesson by lessonId
      Current video: youtubeIds[videoIndex]
      Buttons: [â† Previous] [Next â†’] â†’ Update videoIndex
```

---

## Component Interaction Flow ğŸ”„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        LessonDetail Component                â”‚
â”‚   (Shows list of all lessons)                â”‚
â”‚                                             â”‚
â”‚  useParams: courseId                        â”‚
â”‚  useState: lessons = []                     â”‚
â”‚                                             â”‚
â”‚  useEffect:                                 â”‚
â”‚  â”œâ”€ Check enrollment (Verified?)            â”‚
â”‚  â”œâ”€ Query database for lessons              â”‚
â”‚  â”‚  WHERE courseId = params.courseId        â”‚
â”‚  â”‚  SORT BY order ASC                       â”‚
â”‚  â””â”€ Set lessons state                       â”‚
â”‚                                             â”‚
â”‚  Render:                                    â”‚
â”‚  â”œâ”€ For each lesson:                        â”‚
â”‚  â”‚  â”œâ”€ Show [1] Lesson Title                â”‚
â”‚  â”‚  â”œâ”€ Show description                     â”‚
â”‚  â”‚  â”œâ”€ Show video count                     â”‚
â”‚  â”‚  â””â”€ Button: Link to VideoPlayer          â”‚
â”‚  â”‚     onClick: /video/:courseId/:lessonId/0
â”‚  â”‚                                          â”‚
â”‚  â””â”€ Back button: Link to /course/:id        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ Click [Play â†’]
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       VideoPlayer Component                  â”‚
â”‚   (Shows single video + controls)            â”‚
â”‚                                             â”‚
â”‚  useParams:                                 â”‚
â”‚  â”œâ”€ courseId                                â”‚
â”‚  â”œâ”€ lessonId                                â”‚
â”‚  â””â”€ videoIndex (0, 1, 2, ...)              â”‚
â”‚                                             â”‚
â”‚  useState:                                  â”‚
â”‚  â”œâ”€ lesson = null                           â”‚
â”‚  â”œâ”€ course = null                           â”‚
â”‚  â”œâ”€ currentVideoIndex = videoIndex          â”‚
â”‚  â””â”€ videoError = false                      â”‚
â”‚                                             â”‚
â”‚  useEffect:                                 â”‚
â”‚  â”œâ”€ Check enrollment (Verified?)            â”‚
â”‚  â”œâ”€ Query: GET lesson by lessonId           â”‚
â”‚  â”œâ”€ Query: GET course by courseId           â”‚
â”‚  â””â”€ Fetch lesson data                       â”‚
â”‚                                             â”‚
â”‚  Calculate:                                 â”‚
â”‚  â”œâ”€ youtubeIds = lesson.youtubeIds          â”‚
â”‚  â”œâ”€ currentVideoId = youtubeIds[index]      â”‚
â”‚  â”œâ”€ totalVideos = youtubeIds.length         â”‚
â”‚  â””â”€ canGoPrevious = index > 0               â”‚
â”‚  â””â”€ canGoNext = index < (length - 1)        â”‚
â”‚                                             â”‚
â”‚  Functions:                                 â”‚
â”‚  â”œâ”€ nextVideo()                             â”‚
â”‚  â”‚  â””â”€ setCurrentVideoIndex(index + 1)      â”‚
â”‚  â”‚     â””â”€ Triggers new embed URL            â”‚
â”‚  â”‚                                          â”‚
â”‚  â””â”€ prevVideo()                             â”‚
â”‚     â””â”€ setCurrentVideoIndex(index - 1)      â”‚
â”‚        â””â”€ Triggers new embed URL            â”‚
â”‚                                             â”‚
â”‚  Render:                                    â”‚
â”‚  â”œâ”€ <iframe> with YouTube embed URL:        â”‚
â”‚  â”‚  src={`youtube.com/embed/${currentVideoId}`}
â”‚  â”œâ”€ Progress: "Part {index+1} of {length}"  â”‚
â”‚  â”œâ”€ Progress Bar: {(index+1/length)*100}%   â”‚
â”‚  â”œâ”€ Button: [â† Previous] (disabled if 0)    â”‚
â”‚  â”œâ”€ Button: [Next â†’] (disabled if last)     â”‚
â”‚  â”œâ”€ Lesson description                      â”‚
â”‚  â””â”€ Back button: Link to /watch/:courseId   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”œâ”€ Click [â† Previous]
        â”‚  â””â”€ setCurrentVideoIndex(index - 1)
        â”‚     â””â”€ Re-render with new video
        â”‚
        â”œâ”€ Click [Next â†’]
        â”‚  â””â”€ setCurrentVideoIndex(index + 1)
        â”‚     â””â”€ Re-render with new video
        â”‚
        â”œâ”€ Click [â† Back to Lessons]
        â”‚  â””â”€ Navigate to /watch/:courseId
        â”‚     â””â”€ Return to LessonDetail
        â”‚
        â””â”€ Video fails?
           â””â”€ Show error UI
              â””â”€ Still allow navigation
```

---

## Database Query Map ğŸ—ºï¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           LessonDetail Queries                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚ 1. Check Enrollment:                             â”‚
â”‚    Query: enrollments                            â”‚
â”‚    WHERE courseId = params.courseId              â”‚
â”‚    AND userId = user.$id                         â”‚
â”‚    AND status = "Verified"                       â”‚
â”‚    â†’ Result: hasAccess (true/false)              â”‚
â”‚                                                  â”‚
â”‚ 2. Get All Lessons:                              â”‚
â”‚    Query: lessons                                â”‚
â”‚    WHERE courseId = params.courseId              â”‚
â”‚    ORDER BY order ASC                            â”‚
â”‚    â†’ Result: lessons array                       â”‚
â”‚       [                                          â”‚
â”‚         { $id, title, description, youtubeIds } â”‚
â”‚         { $id, title, description, youtubeIds } â”‚
â”‚         ...                                      â”‚
â”‚       ]                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          VideoPlayer Queries                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚ 1. Check Enrollment:                             â”‚
â”‚    Query: enrollments                            â”‚
â”‚    WHERE courseId = params.courseId              â”‚
â”‚    AND userId = user.$id                         â”‚
â”‚    AND status = "Verified"                       â”‚
â”‚    â†’ Result: hasAccess (true/false)              â”‚
â”‚                                                  â”‚
â”‚ 2. Get Lesson Details:                           â”‚
â”‚    Query: lessons (getDocument)                  â”‚
â”‚    WHERE $id = params.lessonId                   â”‚
â”‚    â†’ Result: {                                   â”‚
â”‚        title: "Practical Application"            â”‚
â”‚        description: "How to apply in life..."    â”‚
â”‚        youtubeIds: ["ID1", "ID2", "ID3"]         â”‚
â”‚      }                                           â”‚
â”‚                                                  â”‚
â”‚ 3. Get Course Details:                           â”‚
â”‚    Query: courses (getDocument)                  â”‚
â”‚    WHERE $id = params.courseId                   â”‚
â”‚    â†’ Result: {                                   â”‚
â”‚        title: "Sacred Philosophy"                â”‚
â”‚      }                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## YouTube Embed Integration ğŸ¥

```
Database
â”‚
â””â”€ lesson_456
   â””â”€ youtubeIds: ["dQw4w9WgXcQ", "jNQXAC9IVRw", "pour9LM8LF7U"]
      â”‚
      â”œâ”€ [0] â†’ "dQw4w9WgXcQ"
      â”œâ”€ [1] â†’ "jNQXAC9IVRw"  
      â””â”€ [2] â†’ "pour9LM8LF7U"
                â”‚
                â†“ (VideoPlayer uses videoIndex)
         
VideoPlayer State
â”‚
â”œâ”€ videoIndex = 0
â”œâ”€ currentVideoId = youtubeIds[0] = "dQw4w9WgXcQ"
â”‚
â””â”€ Render:
   â””â”€ <iframe>
      src={`https://www.youtube.com/embed/dQw4w9WgXcQ`}
      â”‚
      â””â”€ YouTube loads video
         â””â”€ User can watch

Click [Next â†’]
â”‚
â””â”€ videoIndex = 1
   â””â”€ currentVideoId = youtubeIds[1] = "jNQXAC9IVRw"
      â”‚
      â””â”€ <iframe> re-renders
         src={`https://www.youtube.com/embed/jNQXAC9IVRw`}
         â”‚
         â””â”€ Different video loads
```

---

## State Management ğŸ“Š

### LessonDetail State:
```javascript
const [lessons, setLessons] = useState([])
// Updated on mount from database

const [course, setCourse] = useState(null)
// Updated on mount from database

const [hasAccess, setHasAccess] = useState(false)
// Set based on enrollment query

const [loading, setLoading] = useState(true)
// Loading indicator during data fetch
```

### VideoPlayer State:
```javascript
const [lesson, setLesson] = useState(null)
// Individual lesson data

const [course, setCourse] = useState(null)
// Course for breadcrumb

const [hasAccess, setHasAccess] = useState(false)
// Enrollment verification

const [loading, setLoading] = useState(true)
// Loading indicator

const [videoError, setVideoError] = useState(false)
// Video failed to load

const [currentVideoIndex, setCurrentVideoIndex] = useState(0)
// Which video in youtubeIds array
```

---

## Navigation State Machine ğŸ”„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   HOME PAGE     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Click Course
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COURSE DETAIL PAGE     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Click "Watch"
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LESSON LIST PAGE                        â”‚
â”‚  /watch/:courseId                        â”‚
â”‚  State: lessons[], course, hasAccess     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Click [Play â†’]
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VIDEO PLAYER PAGE                                   â”‚
â”‚  /video/:courseId/:lessonId/:videoIndex              â”‚
â”‚  State: lesson, currentVideoIndex, videoError        â”‚
â”‚                                                      â”‚
â”‚  User can:                                           â”‚
â”‚  â”œâ”€ Click [â† Previous] â†’ videoIndex--               â”‚
â”‚  â”œâ”€ Click [Next â†’] â†’ videoIndex++                   â”‚
â”‚  â”œâ”€ Click [â† Back to Lessons] â†’ Go back             â”‚
â”‚  â””â”€ Scroll down to see description                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Responsive Design Grid ğŸ“±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MOBILE (375px)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  Back to Course                                     â”‚
â”‚  [Course Title]                                     â”‚
â”‚  3 Lessons                                          â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [1] Lesson                                   â”‚  â”‚
â”‚  â”‚ ğŸ¬ 2 Videos              [Play â†’]            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [2] Lesson                                   â”‚  â”‚
â”‚  â”‚ ğŸ¬ 3 Videos              [Play â†’]            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [3] Lesson                                   â”‚  â”‚
â”‚  â”‚ ğŸ¬ 1 Video               [Play â†’]            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         TABLET (768px)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  Back to Course   Course Title        3 Lessons         â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [1] Lesson Title                                 â”‚   â”‚
â”‚  â”‚ Description here... ğŸ¬ 2 Videos   [Play â†’]      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [2] Lesson Title                                 â”‚   â”‚
â”‚  â”‚ Description here... ğŸ¬ 3 Videos   [Play â†’]      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [3] Lesson Title                                 â”‚   â”‚
â”‚  â”‚ Description here... ğŸ¬ 1 Video    [Play â†’]      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         DESKTOP (1920px)                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Back to Course  â”‚  Course Title                3 Lessons       â”‚
â”‚                  â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [1] Lesson Title          Description here...             â”‚  â”‚
â”‚  â”‚ ğŸ¬ 2 Videos               [Play â†’]                        â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ [2] Lesson Title          Description here...             â”‚  â”‚
â”‚  â”‚ ğŸ¬ 3 Videos               [Play â†’]                        â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ [3] Lesson Title          Description here...             â”‚  â”‚
â”‚  â”‚ ğŸ¬ 1 Video                [Play â†’]                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Error Handling Flow ğŸš¨

```
User tries to watch video
â”‚
â”œâ”€ Check 1: User enrolled? â†’ No
â”‚  â””â”€ Show: "Access Denied" message
â”‚     â””â”€ Link to home page
â”‚
â”œâ”€ Check 2: Enrollment verified? â†’ No
â”‚  â””â”€ Show: "Awaiting verification" message
â”‚     â””â”€ Wait for admin
â”‚
â”œâ”€ Check 3: Lesson exists? â†’ No
â”‚  â””â”€ Show: "Lesson not found" message
â”‚     â””â”€ Back button
â”‚
â”œâ”€ Check 4: YouTube embed? â†’ Fails
â”‚  â””â”€ Show: "Video Unavailable"
â”‚     â”œâ”€ Reason: "Video is currently unavailable"
â”‚     â”œâ”€ Suggestion: "Try another part or contact support"
â”‚     â””â”€ [â† Previous] or [Next â†’] still work
â”‚        (Can switch to working video)
â”‚
â””â”€ All checks pass? â†’ Video loads!
   â””â”€ User can watch and navigate
```

---

## Summary ğŸ“‹

```
âœ… LessonDetail Component
   - Lists all lessons
   - Route: /watch/:courseId
   - Database: GET lessons WHERE courseId

âœ… VideoPlayer Component  
   - Plays single video
   - Route: /video/:courseId/:lessonId/:videoIndex
   - Database: GET lesson WHERE lessonId

âœ… App Routes
   - Both routes configured
   - ProtectedRoute applied
   - Error handling included

âœ… User Experience
   - Clear lesson list
   - Full-screen video
   - Easy navigation
   - Mobile responsive
   - Error handling

âœ… YouTube Integration
   - Embed URL format correct
   - Error handling for failures
   - Multiple videos per lesson
   - Progress tracking
```

---

**All components are properly integrated and ready to use!** ğŸ‰
